const { Storage } = require('@google-cloud/storage');
const storage = new Storage();

const writeVulnToBucket = async (bucketName, vulnText, filename) => {
  try {
    const bucket = storage.bucket(bucketName);
    const file = bucket.file(filename);

    await file.save(vulnText); 
    console.log(`Saved ${filename} successfully to ${bucketName} bucket`);
  } catch (error) {
    console.error(`Failed to write ${filename} to bucket: ${error}`);
    throw error;
  }
};

module.exports = { writeVulnToBucket };
