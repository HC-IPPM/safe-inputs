const getAffectedPackages = async (packageIssues) => {
  const affectedPackages = [];

  for (const issue of packageIssues) {
    try {
      const affectedPackageName = issue.affectedPackage;
      const affectedVersion = issue.affectedVersion.name;

      if (affectedPackageName && affectedVersion) {
        affectedPackages.push({ affectedPackageName, affectedVersion });
      } else {
        console.error('Invalid package issue:', issue);
      }
    } catch (error) {
      console.error(`Error processing package issue:`, error);
    }
  }
  return affectedPackages; // [{package, version}]
};

module.exports = { getAffectedPackages };
